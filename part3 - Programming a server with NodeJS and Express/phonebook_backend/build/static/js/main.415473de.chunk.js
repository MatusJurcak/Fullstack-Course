(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),r=t(6),u=t(3),o=t(2),i=t(4),s=t.n(i),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},h=function(e){return s.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))},f=t(0),m=function(e){return Object(f.jsxs)("div",{children:["filter shown with",Object(f.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},O=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{className:"message",children:n})},p=function(e){var n=e.message;return null===n?null:Object(f.jsx)("div",{className:"error",children:n})},v=function(e){return Object(f.jsxs)("form",{onSubmit:e.addName,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(f.jsxs)("div",{children:["number: ",Object(f.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.namesToShow,t=e.removePerson;return Object(f.jsx)("ul",{children:n.map((function(e){return Object(f.jsxs)("li",{children:[e.name," ",e.number," ",Object(f.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))})},g=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),i=Object(u.a)(a,2),s=i[0],l=i[1],g=Object(o.useState)(""),w=Object(u.a)(g,2),C=w[0],N=w[1],S=Object(o.useState)(""),k=Object(u.a)(S,2),T=k[0],y=k[1],F=Object(o.useState)(null),U=Object(u.a)(F,2),P=U[0],D=U[1],E=Object(o.useState)(null),I=Object(u.a)(E,2),J=I[0],A=I[1];Object(o.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var B=""===T?t:t.filter((function(e){return e.name.toUpperCase().includes(T.toUpperCase())}));return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(O,{message:J}),Object(f.jsx)(p,{message:P}),Object(f.jsx)(m,{newFilter:T,handleFilterChange:function(e){y(e.target.value)}}),Object(f.jsx)("h1",{children:"add a new"}),Object(f.jsx)(v,{addName:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(s)){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name.toUpperCase()===s.toUpperCase()})),a=Object(r.a)(Object(r.a)({},n),{},{number:C});h(a).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){D("Information of ".concat(a.name," has already been removed from server")),setTimeout((function(){D(null)}),3e3),c(t.filter((function(e){return e.id!==a.id})))}))}}else{var u={name:s,number:C};j(u).then((function(e){c(t.concat(e)),l(""),N(""),A("Added ".concat(u.name)),setTimeout((function(){A(null)}),3e3)}))}},newName:s,newNumber:C,handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){N(e.target.value)}}),Object(f.jsx)("h1",{children:"Numbers"}),Object(f.jsx)(x,{namesToShow:B,removePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&b(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),D("".concat(e.name," has been deleted from server")),setTimeout((function(){D(null)}),3e3)}))}})]})};t(39);a.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.415473de.chunk.js.map